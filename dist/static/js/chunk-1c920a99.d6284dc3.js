(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c920a99"],{1152:function(e,t,n){"use strict";var r=n("df3d"),a=n.n(r);a.a},"6c66":function(e,t,n){"use strict";var r=n("d90a"),a=n.n(r);a.a},"9e75":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-card",[n("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[n("div",{staticClass:"input"},[n("el-input",{attrs:{clearable:"",placeholder:"订单号"},on:{change:e.filterChange},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),n("div",[n("el-select",{attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"请输入用户关键字","remote-method":e.memberRemoteMethod,loading:e.goodsLoading},on:{change:e.filterChange},model:{value:e.member_id,callback:function(t){e.member_id=t},expression:"member_id"}},e._l(e.memberList,function(e){return n("el-option",{key:e.id,attrs:{label:e.nickname,value:e.id}})}),1)],1),n("div",[n("el-select",{attrs:{filterable:"",remote:"",clearable:"","reserve-keyword":"",placeholder:"请输入配送工关键字","remote-method":e.workerRemoteMethod,loading:e.workerLoading},on:{change:e.filterChange},model:{value:e.worker_id,callback:function(t){e.worker_id=t},expression:"worker_id"}},e._l(e.workerList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),n("br"),n("div",[n("el-select",{attrs:{clearable:"",placeholder:"退款状态"},on:{change:e.filterChange},model:{value:e.refund,callback:function(t){e.refund=t},expression:"refund"}},e._l(e.refundList,function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),n("div",[n("el-select",{attrs:{clearable:"",placeholder:"支付状态"},on:{change:e.filterChange},model:{value:e.is_pay,callback:function(t){e.is_pay=t},expression:"is_pay"}},e._l(e.payList,function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),n("div",[n("el-select",{attrs:{clearable:"",placeholder:"发货状态"},on:{change:e.filterChange},model:{value:e.express,callback:function(t){e.express=t},expression:"express"}},e._l(e.expressList,function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),n("div",[n("el-select",{attrs:{clearable:"",placeholder:"订单状态"},on:{change:e.filterChange},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},e._l(e.selectList,function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),n("el-button",{attrs:{type:"text"},on:{click:e.filterChange}},[e._v("搜 索")])],1),n("el-table",{staticClass:"c-table",attrs:{data:e.tableData,height:"650",border:"","m-b-10":""}},[n("el-table-column",{attrs:{label:"订单编号","min-width":"150px",fixed:"left",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.order_sn))]}}])}),n("el-table-column",{attrs:{label:"订单金额",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.orderfee))]}}])}),n("el-table-column",{attrs:{label:"会员昵称",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.member_info.nickname))]}}])}),n("el-table-column",{attrs:{label:"会员头像",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[n("img",{staticClass:"imgk",attrs:{src:t.member_info.headurl,alt:""}})]}}])}),n("el-table-column",{attrs:{label:"联系人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.linkman))]}}])}),n("el-table-column",{attrs:{label:"联系电话",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.contact))]}}])}),n("el-table-column",{attrs:{label:"收货地址",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.address))]}}])}),n("el-table-column",{attrs:{label:"订单状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.status_str))]}}])}),n("el-table-column",{attrs:{label:"支付状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.pay_str))]}}])}),n("el-table-column",{attrs:{label:"支付方式",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.payment_str))]}}])}),n("el-table-column",{attrs:{label:"支付时间",align:"center","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.paytime))]}}])}),n("el-table-column",{attrs:{label:"运单号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.express_number))]}}])}),n("el-table-column",{attrs:{label:"配送方式",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.express_type_str))]}}])}),n("el-table-column",{attrs:{label:"配送工姓名",align:"center","min-width":"100px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.worker_info?n.worker_info.name:"暂无"))]}}])}),n("el-table-column",{attrs:{label:"配送工联系方式",align:"center","min-width":"120px"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.worker_info?n.worker_info.contact:"暂无"))]}}])}),n("el-table-column",{attrs:{label:"退款状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[e._v(e._s(n.refund_str))]}}])}),n("el-table-column",{attrs:{label:"操作",fixed:"right",align:"center",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){t.$index;var r=t.row;return[2==r.status&&0==r.refund?n("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.postHandle(r)}}},[e._v("本地配送")]):e._e(),2==r.status&&0==r.refund?n("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.sendHandle(r)}}},[e._v("物流发货")]):e._e(),3==r.status&&"EXPRESS"==r.express_type?n("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.handleFind(r)}}},[e._v("快递查询")]):e._e(),n("el-button",{attrs:{size:"mini",type:"info"},on:{click:function(t){return e.detailHandle(r)}}},[e._v("查看详情")]),21==r.refund?n("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.handleOk(r)}}},[e._v("同意退款")]):e._e(),21==r.refund?n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){return e.handleNo(r)}}},[e._v("拒绝退款")]):e._e()]}}])})],1),n("BasePagination",{attrs:{max:e.maxPage,now:e.nowPage},on:{"update:now":function(t){e.nowPage=t}}})],1),n("orderInfo",{ref:"orderInfo"}),n("send",{ref:"send",on:{filterChange:e.filterChange}}),n("ok",{ref:"ok",on:{filterChange:e.filterChange}}),n("change",{ref:"change",on:{filterChange:e.filterChange}}),n("postman",{ref:"postman",on:{filterChange:e.filterChange}}),e.isFind?n("find",{attrs:{number:e.findNumber},on:{close:e.findClose}}):e._e()],1)},a=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{visible:e.showModal,width:"500px",center:""},on:{close:function(t){e.showModal=!1}}},[n("div",{staticStyle:{margin:"0 auto",width:"80%"}},[n("el-form",{attrs:{"label-position":"right","label-width":"100px"}},[n("el-form-item",{attrs:{label:"运单号"}},[n("el-input",{attrs:{placeholder:"填写快递单号"},model:{value:e.sendId,callback:function(t){e.sendId=t},expression:"sendId"}})],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.showModal=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.onSend}},[e._v("确 定")])],1)])},l=[],s={props:["orderId"],data:function(){return{showModal:!1,company:"",sendId:"",select:"",id:"",selectList:[{label:"物流",value:"EXPRESS"},{label:"送货",value:"DELIVERY"}]}},methods:{onSend:function(){var e=this;this.$http.post("/Manage/Order/deliver",{id:this.id,express_number:this.sendId,type:"EXPRESS"}).then(function(t){e.$emit("filterChange"),e.showModal=!1,e.$message({showClose:!0,message:"发货成功",type:"success"})})}}},i=s,d=n("2877"),c=Object(d["a"])(i,o,l,!1,null,null,null),u=c.exports,f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{visible:e.showModal,width:"70%",center:"",title:"订单详情"},on:{close:function(t){e.showModal=!1}}},[n("el-row",{staticClass:"details",attrs:{gutter:30}},[n("el-col",{attrs:{span:8}},[n("el-card",[n("el-form",{attrs:{model:e.orderInfo,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"订单编号"}},[n("el-input",{attrs:{disabled:""},model:{value:e.orderInfo.order_sn,callback:function(t){e.$set(e.orderInfo,"order_sn",t)},expression:"orderInfo.order_sn"}})],1),n("el-form-item",{attrs:{label:"联系人"}},[n("el-input",{attrs:{disabled:""},model:{value:e.orderInfo.linkman,callback:function(t){e.$set(e.orderInfo,"linkman",t)},expression:"orderInfo.linkman"}})],1),n("el-form-item",{attrs:{label:"联系电话"}},[n("el-input",{attrs:{disabled:""},model:{value:e.orderInfo.contact,callback:function(t){e.$set(e.orderInfo,"contact",t)},expression:"orderInfo.contact"}})],1),n("el-form-item",{attrs:{label:"收货地址"}},[n("el-input",{attrs:{disabled:""},model:{value:e.orderInfo.address,callback:function(t){e.$set(e.orderInfo,"address",t)},expression:"orderInfo.address"}})],1),n("el-form-item",{attrs:{label:"配送方式"}},[n("el-input",{attrs:{disabled:""},model:{value:e.orderInfo.express_type_str,callback:function(t){e.$set(e.orderInfo,"express_type_str",t)},expression:"orderInfo.express_type_str"}})],1),n("el-form-item",{attrs:{label:"运单号"}},[n("el-input",{attrs:{disabled:""},model:{value:e.orderInfo.express_number,callback:function(t){e.$set(e.orderInfo,"express_number",t)},expression:"orderInfo.express_number"}})],1),n("el-form-item",{attrs:{label:"配送工"}},[n("el-input",{attrs:{disabled:""},model:{value:e.worker_info&&e.worker_info.name||"",callback:function(t){e.$set(e.worker_info&&e.worker_info,"name || ''",t)},expression:"worker_info && worker_info.name || ''"}})],1)],1)],1)],1),n("el-col",{attrs:{span:16}},[n("el-card",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.detailedList}},e._l(e.columnList,function(e,t){return n("el-table-column",{key:t,attrs:{prop:e.props||"未付款",label:e.label}})}),1)],1)],1),n("el-col",{staticStyle:{"margin-top":"30px"},attrs:{span:16}},[n("el-card",[n("div",[n("div",[e._v("退款备注:")]),n("div",[e._v(e._s(e.note))])])])],1)],1)],1)},m=[],p={props:[],data:function(){return{note:"",showModal:!1,form:{},orderInfo:{},detailedList:[],worker_info:{},columnList:[{label:"商品名称",props:"goods_name"},{label:"所属分类",props:"cate_name"},{label:"商品金额",props:"goods_price"},{label:"支付金额",props:"price_final"},{label:"购买数量",props:"buy_num"}]}},methods:{getDetails:function(){var e=this;this.$http.get("/Manage/Order/info",{params:{id:this.form.id}}).then(function(t){e.orderInfo=t.data.info,e.detailedList=t.data.order_item,e.worker_info=t.data.worker_info,e.note=t.data.info.remark})}},watch:{showModal:function(e){e&&this.getDetails()}}},b=p,h=(n("1152"),Object(d["a"])(b,f,m,!1,null,null,null)),g=h.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"退款",visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"formName",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"退款金额","label-width":e.formLabelWidth,prop:"name"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sure("formName")}}},[e._v("确 定")])],1)],1)},v=[],w=(n("7f7f"),{components:{},props:{},data:function(){return{id:"",dialogFormVisible:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"120px",rules:{name:[{required:!0,message:"请输入退款金额",trigger:"blur"}]}}},watch:{},computed:{},methods:{sure:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$http.post("/Manage/order/agreen",{id:t.id,refund_money:t.form.name}).then(function(e){t.dialogFormVisible=!1,t.$emit("filterChange"),t.$message({showClose:!0,message:"已退款",type:"success"})})})}},created:function(){},mounted:function(){}}),k=w,y=Object(d["a"])(k,_,v,!1,null,"2820814b",null),x=y.exports,$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"修改金额",visible:e.dialogFormVisible,width:"500px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"formName",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"金额","label-width":e.formLabelWidth,prop:"name"}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sure("formName")}}},[e._v("确 定")])],1)],1)},L=[],C={components:{},props:{},data:function(){return{id:"",dialogFormVisible:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"120px",rules:{name:[{required:!0,message:"请输入金额",trigger:"blur"}]}}},watch:{},computed:{},methods:{sure:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.$http.post("/Manage/Order/price",{id:t.id,refund_money:t.form.name}).then(function(e){t.dialogFormVisible=!1,t.$emit("filterChange"),t.$message({showClose:!0,message:"已修改",type:"success"})})})}},created:function(){},mounted:function(){}},I=C,S=Object(d["a"])(I,$,L,!1,null,"e9e14be8",null),M=S.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"配送",visible:e.dialogFormVisible,width:"400px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"formName",attrs:{model:e.form,rules:e.rules}},[n("el-form-item",{attrs:{label:"选择配送工","label-width":e.formLabelWidth}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sure("formName")}}},[e._v("确 定")])],1)],1)},V=[],E=n("5d73"),O=n.n(E),D={components:{},props:{},data:function(){return{postmanid:"",value:"",options:[],dialogFormVisible:!1,form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},formLabelWidth:"120px",rules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]}}},watch:{},computed:{},methods:{sure:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.dialogFormVisible=!1,t.$http.post("/Manage/order/worker",{order_id:t.postmanid,worker_id:t.value,type:"DELIVERY"}).then(function(e){t.$emit("filterChange"),t.$message({showClose:!0,message:"分配成功",type:"success"})})})},getlist:function(){var e=this;this.$http.get("/Manage/Worker/lists",{params:{}}).then(function(t){var n=!0,r=!1,a=void 0;try{for(var o,l=O()(t.data.list);!(n=(o=l.next()).done);n=!0){var s=o.value;e.options.push({label:s.name,value:s.id})}}catch(i){r=!0,a=i}finally{try{n||null==l.return||l.return()}finally{if(r)throw a}}})}},created:function(){this.getlist()},mounted:function(){}},P=D,N=Object(d["a"])(P,F,V,!1,null,"1037d4dd",null),R=N.exports,W=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"快递查询",visible:e.dialog},on:{"update:visible":function(t){e.dialog=t},close:function(t){return e.$emit("close")}}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{label:"日期",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.time))])]}}])}),n("el-table-column",{attrs:{label:"详情","min-width":"350px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.info))])]}}])})],1)],1)},j=[],H={components:{},props:["number"],data:function(){return{tableData:[],dialog:!0}},watch:{},computed:{},methods:{getData:function(){var e=this;this.$http.get("/Manage/Order/express",{params:{number:this.number}}).then(function(t){e.tableData=t.data.list})}},created:function(){this.getData()},mounted:function(){}},z=H,q=Object(d["a"])(z,W,j,!1,null,"0a10186f",null),B=q.exports,X=(n("c5db"),{components:{send:u,orderInfo:g,ok:x,change:M,postman:R,find:B},data:function(){return{isFind:!1,findNumber:"",tableData:[],search1:"",keywords:"",select:"",selectList:[],value6:[],maxPage:1,nowPage:1,member_id:"",goodsLoading:!1,memberList:[],worker_id:"",workerLoading:!1,workerList:[],payList:[],is_pay:"",refundList:[],refund:"",expressList:[],express:""}},watch:{nowPage:function(){this.getdata()}},methods:{filterChange:function(){this.getdata()},detailHandle:function(e){this.$refs.orderInfo.showModal=!0,this.$refs.orderInfo.form=e},postHandle:function(e){this.$refs.postman.dialogFormVisible=!0,this.$refs.postman.postmanid=e.id},sendHandle:function(e){this.$refs.send.showModal=!0,this.$refs.send.id=e.id},infoHandle:function(e){},handleOk:function(e){this.$refs.ok.dialogFormVisible=!0,this.$refs.ok.id=e.id},handleFind:function(e){this.isFind=!0,console.log(e),this.findNumber=e.express_number},findClose:function(){this.isFind=!1},handleNo:function(e){var t=this;this.$confirm("该操作将拒绝退款?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post("/Manage/order/deny",{id:e.id}).then(function(e){t.getdata(),t.$message({type:"success",message:"删除成功!"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleChange:function(e){this.$refs.change.dialogFormVisible=!0,this.$refs.change.id=e.id},add:function(){},getdata:function(){var e=this;this.$http.get("/Manage/order/lists",{params:{page:this.nowPage,rows:10,member_id:this.member_id,worker_id:this.worker_id,is_pay:this.is_pay,refund:this.refund,state:this.select,express:this.express,keywords:this.keywords}}).then(function(t){e.tableData=t.data.list,e.selectList=t.data.state_screen,e.maxPage=t.data.page_total,e.payList=t.data.pay_screen,e.refundList=t.data.refund_screen,e.expressList=t.data.express_screen})},memberRemoteMethod:function(e){var t=this;""!==e?(this.memberLoading=!0,this.$http.get("/Manage/Member/lists",{params:{page:1,rows:1e6,keywords:e}}).then(function(e){t.memberList=e.data.list,t.memberLoading=!1})):this.memberOptions=[]},workerRemoteMethod:function(e){var t=this;""!==e?(this.memberLoading=!0,this.$http.get("/Manage/Worker/lists",{params:{page:1,rows:1e6,keywords:e}}).then(function(e){t.workerList=e.data.list,t.workerLoading=!1})):this.memberOptions=[]}},created:function(){this.$route.query.homeValue&&(this.select=this.$route.query.homeValue),this.getdata()}}),J=X,T=(n("6c66"),Object(d["a"])(J,r,a,!1,null,"13035600",null));t["default"]=T.exports},c5db:function(e,t,n){},d90a:function(e,t,n){},df3d:function(e,t,n){}}]);